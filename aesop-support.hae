#ifndef __AESOP_SUPPORT_HAE__
#define __AESOP_SUPPORT_HAE__

#include "aesop.h"
#include "resource.h"
#include "resources/timer/timer.hae"

/** TODO: need to fix this. depends on timer */

#define aesop_cancel_branches_wait() \
    { \
        int __ae_cancel_branches_wait_ret; \
        do { \
            aesop_cancel_branches(); \
            if (aesop_count_branches() < 2) { \
                break; \
            } \
            __ae_cancel_branches_wait_ret = triton_timer(2); \
        } while (__ae_cancel_branches_wait_ret == 0); \
    }

#endif
